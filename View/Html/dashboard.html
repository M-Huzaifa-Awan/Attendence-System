<!DOCTYPE html>
<html>

<head>
    <title>Attendance System</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <style>
        .btn-sm {
            padding: .25rem .5rem;
            font-size: .875rem;
        }

        .date-container {
            margin-right: 10px;
        }
        .navbar {
            border: 2px solid black; /* Solid black border */
        }

        .logo-container {
            text-align: center;
            margin-bottom: 10px; /* Adjust margin as needed */
        }

            .logo-container img {
                width: 150px; /* Adjust the size as needed */
                height: auto;
            }

        /* Clear the default margin on the body */
        body {
            margin: 0;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="../../Controller/dashboardController.js"></script>

</head>

<body>
 
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="logo-container">
      <img src="https://seeklogo.com/images/N/numl-logo-8250E1FBC3-seeklogo.com.png" alt="NUMl Logo">
    </div>


        <div class="dropdown mr-3">
            <select class="btn btn-secondary" id="sessionDropdown">
                <option value="" selected disabled>Select Session</option>
                <option value="Morning">Morning</option>
                <option value="Evening">Evening</option>
            </select>
        </div>

        <div class="dropdown mr-3">
            <select class="btn btn-secondary" id="semesterDropdown">
                <option value="" selected disabled>Select Semester</option>
                <option value="1">Semester 1</option>
                <option value="2">Semester 2</option>
                <option value="3">Semester 3</option>
                <option value="4">Semester 4</option>
                <option value="5">Semester 5</option>
                <option value="6">Semester 6</option>
                <option value="7">Semester 7</option>
                <option value="8">Semester 8</option>
            </select>
        </div>

        <div class="dropdown mr-3">
            <select class="btn btn-secondary" id="sectionDropdown">
                <option value="" selected disabled>Select Section</option>
                <option value="A">Section A</option>
                <option value="B">Section B</option>
            </select>
        </div>


        <div class="date-container">
            <p class="mb-0">Today's Date: <span id="todayDate"></span></p>
        </div>

        <button class="btn btn-primary" id="submitButton" disabled>Enter</button>

        <div class="dropdown mr-3">
            <select class="btn btn-secondary" id="subjectDropdown">
                <option value="" selected disabled>Select Subject</option>
            </select>
        </div>

        <div class="dropdown mr-3">
            <select class="btn btn-secondary" id="subjectDropdown">
                <option value="" selected disabled>Select Slot</option>
                <option value="1">Slot 1</option>
                <option value="2">Slot 2</option>
            </select>
        </div>
        <button class="btn btn-primary" id="submitAttendence">Submit</button>

    </nav>
    <div id="tableContainer"></div>



    <script>
        var today = new Date();
        var formattedDate = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();
        $("#todayDate").text(formattedDate);

        $(document).ready(function () {
            $("#sessionDropdown, #semesterDropdown, #sectionDropdown, #subjectDropdown").on('change', function () {
                checkDropdowns();
            });
        });
        function checkDropdowns() {
            var session = $("#sessionDropdown").val();
            var semester = $("#semesterDropdown").val();
            var section = $("#sectionDropdown").val();

            if (session !== null && semester !== null && section !== null) {
                $("#submitButton").prop('disabled', false);
            } else {
                $("#submitButton").prop('disabled', true);
            }

        }
        $("#submitButton").on('click', function () {
            sendSelectedOptions();
        });

        function sendSelectedOptions() {
            const session = $("#sessionDropdown").val();
            const semester = $("#semesterDropdown").val();
            const section = $("#sectionDropdown").val();
            getDashboardData(session, semester, section);
            getSubjectData(semester);

        }

        function createTable(data) {
            // Create a table element with Bootstrap classes
            var table = document.createElement("table");
            table.classList.add("table", "table-bordered", "table-striped");

            // Create a table header row with Bootstrap classes
            var headerRow = table.insertRow(0);
            headerRow.classList.add("thead-dark");

            // Hardcoded column names
            var columnNames = ["Roll No", "Name", "Status"];

            // Create header cells
            for (var i = 0; i < columnNames.length; i++) {
                var th = document.createElement("th");
                th.textContent = columnNames[i];
                th.classList.add("text-left"); // Align text to the left
                headerRow.appendChild(th);
            }

            // Create table rows and cells with Bootstrap classes
            for (var i = 0; i < data.length; i++) {
                var row = table.insertRow(i + 1);

                // Add Roll No
                var cellRollNo = row.insertCell();
                cellRollNo.textContent = data[i]["rollNo"];
                cellRollNo.classList.add("text-left");

                // Add Name
                var cellName = row.insertCell();
                cellName.textContent = data[i]["NAME"];
                cellName.classList.add("text-left");

                // Add Status with dropdown
                var cellStatus = row.insertCell();
                var statusDropdown = createStatusDropdown(); // Create a dropdown for status
                cellStatus.appendChild(statusDropdown);
            }

            // Append the table to the container
            document.getElementById("tableContainer").appendChild(table);
        }

        // Function to create a dropdown for status
        function createStatusDropdown() {
            var dropdown = document.createElement("select");
            dropdown.classList.add("form-control");

            var optionPresent = document.createElement("option");
            optionPresent.value = "Present";
            optionPresent.text = "Present";

            var optionAbsent = document.createElement("option");
            optionAbsent.value = "Absent";
            optionAbsent.text = "Absent";

            // Add options to the dropdown
            dropdown.appendChild(optionPresent);
            dropdown.appendChild(optionAbsent);

            return dropdown;
        }

    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
